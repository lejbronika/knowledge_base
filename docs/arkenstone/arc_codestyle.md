---
tags:
  - style
  - python
  - django
---

# Стиль кода

## Django

- В `urls.py` в конце роутов стоит слеш `/`.
- Для URL применяются соответствующие [Path converters](https://docs.djangoproject.com/en/3.1/topics/http/urls/#path-converters).
- Соблюдается официальный [Django codestyle](https://docs.djangoproject.com/en/dev/internals/contributing/writing-code/coding-style/).
- View-функции хрянятся в нескольких файлах, при добавлении новых view-функций они **обязательно** должны быть подключены в `__init__.py`.

## HTML-шаблоны

- `{{ переменные }}` и `{% теги %}` в шаблонах отформатированы согласно общепринятым [рекомендациям](https://docs.djangoproject.com/en/dev/internals/contributing/writing-code/coding-style/#template-style).
- HTML-теги в шаблонах отбиты отступами в соответствии со вложенностью. Размер отступа — 2 или 4 пробела, постоянный в пределах проекта.
- В приложениях указаны правильные пути к шаблонам.
	+ Допустимый путь: `app/templates/app/index.html`.
	+ Недопустимый путь: `app/templates/index.html`.
	+ Возможен вариант с *project level templates*: общая директория в корне проекта со всеми шаблонами внутри.

## Общие правила

- Cоблюдение [PEP8](https://www.python.org/dev/peps/pep-0008/), кроме случаев противоречия Django codestyle.
- Использование [flake8](https://flake8.pycqa.org/en/latest/) в качестве линтера.
- Длина строки — 79 символов.
- Отступы - 4 пробела.
- Переносы с правильными отступами.
- Бэкслеши для переносов не применяются.
- Консистентность (одинаковые кавычки, одинаковые методы решения одинаковых проблем и так далее).
- Отсутствие закомментированного кода в `master` и стандартных комментариев Django (`# Create your views here.` etc.).
- Комментарии к функциям оформлены в виде Docstrings, в соответствии с [Docstring Conventions](https://www.python.org/dev/peps/pep-0257/): начинаются с большой буквы, заканчиваются точкой и содержат описание того, что делает функция.
- Комментарии к коду лаконичны и содержательны.
- Длинные куски кода логически разделены пустыми строками, как абзацы в тексте.
- Отсутствуют лишние операции.
- Нет лишних else там, где они не нужны - если в `if` происходит `return/raise`, то используется [Guard Block](https://medium.com/lemon-code/guard-clauses-3bc0cd96a2d3).
- В репозитории нет лишних файлов: никаких `__pycache__`, `.vscode` и прочего.
- Исполняемый код в .py-файлах должен быть закрыт конструкцией
``
if __name__ == "__main__":
``
- Для неизменяемых последовательностей данных предпочтительнее применяются кортежи, а не списки.
- В f-строках применяется только подстановка переменных и нет логических или арифметических операций, вызовов функций и подобной динамики.
- Переменные названы в соответствии с их смыслом, по-английски, нет однобуквенных названий и транслита. В названии переменной не должен содержаться её тип. При необходимости применяются [type annotations](https://dev.to/dstarner/using-pythons-type-annotations-4cfe).
